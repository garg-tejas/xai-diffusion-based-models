# Model Configuration
model:
  checkpoint_path: "logs/aptos/version_0/checkpoints/last.ckpt"

  config_path: "configs/aptos.yml"

  diffusion_config_path: "option/diff_DDIM.yaml"

  device: "auto"

# Sample Selection
sampling:
  predictions_csv: "preds_epoch40.csv"

  samples_per_class: 5

  # Options: 'balanced' (mix correct/incorrect), 'correct_only', 'incorrect_only', 'random'
  selection_strategy: "balanced"

  balanced_ratio: [3, 2]

  random_seed: 42

# Output Configuration
output:
  output_dir: "outputs"

  images_dir: "images"
  html_dir: "html"
  arrays_dir: "arrays"

  save_images: true
  save_html: true
  save_arrays: true

  create_interactive: true
  create_animations: true
  create_combined_animations: true
  animation_fps: 1
  animation_quality: "medium"
  show_animation_controls: true

  image_format: "png" # 'png' or 'jpg'
  image_dpi: 300

# Visualization Settings
visualization:
  colormap: "jet"
  overlay_alpha: 0.5
  attention_resolution: [512, 512]
  normalize_attention: true
  figure_size: [12, 8]
  title_fontsize: 16
  label_fontsize: 12
  tick_fontsize: 10
  bbox_linewidth: 3
  bbox_colors: ["red", "blue", "green", "yellow", "cyan", "magenta"]

# Explainer Settings
explainers:
  attention:
    enabled: true
    class_specific: true
    show_patches: true
    show_weights: true

  # Diffusion Explainer settings
  diffusion:
    enabled: true
    # Set to -1 to visualize all timesteps, or a positive integer to subsample
    num_timesteps_to_visualize: -1
    create_animation: true
    animation_fps: 1
    show_simplex: false # 3D simplex only works well for 3-4 classes

  guidance_map:
    enabled: true
    create_animation: true

  feature_prior:
    enabled: true
    # Method for feature space visualization: 'pca' or 'tsne'
    feature_space_method: "pca"

  noise_analysis:
    enabled: true
    create_animation: true

# Data Processing
data:
  image_size: 512
  normalize_mean: [0.485, 0.456, 0.406]
  normalize_std: [0.229, 0.224, 0.225]

  num_classes: 5

  class_names:
    0: "No DR"
    1: "Mild"
    2: "Moderate"
    3: "Severe"
    4: "Proliferative DR"

# Logging
logging:
  # Verbosity level (0: minimal, 1: normal, 2: detailed)
  verbosity: 1

  show_progress: true

  save_log: true
  log_file: "outputs/xai_processing.log"

# Performance
performance:
  batch_size: 1

  num_workers: 0

  use_amp: false
